import time
import board
import digitalio
from game_manager import GameManager


game = GameManager()
beat_map = [
    (12.254, 1, "tap"),
    (13.617, 3, "flick"),
    (14.299, 4, "flick"),
    (14.981, 3, "tap"),
    (16.685, 1, "tap"),
    (17.026, 1, "tap"),
    (17.708, 3, "tap"),
    (19.072, 2, "flick"),
    (19.754, 2, "tap"),
    (20.435, 3, "tap"),
    (21.799, 1, "tap"),
    (22.140, 2, "flick"),
    (23.163, 2, "tap"),
    (24.526, 4, "tap"),
    (25.208, 4, "tap"),
    (25.890, 3, "tap"),
    (27.595, 1, "tap"),
    (27.935, 2, "flick"),
    (28.617, 3, "tap"),
    (29.981, 1, "tap"),
    (30.663, 2, "tap"),
    (31.345, 1, "tap"),
    (32.708, 4, "tap"),
    (33.049, 4, "tap"),
    (34.072, 3, "tap"),
    (35.435, 4, "tap"),
    (36.117, 4, "tap"),
    (36.799, 3, "tap"),
    (38.504, 4, "tap"),
    (38.845, 4, "tap"),
    (39.526, 4, "tap"),
    (40.890, 2, "tap"),
    (41.572, 2, "tap"),
    (42.254, 2, "tap"),
    (43.617, 4, "tap"),
    (43.958, 4, "flick"),
    (44.981, 3, "tap"),
    (53.163, 3, "tap"),
    (55.890, 1, "tap"),
    (56.913, 3, "tap"),
    (57.254, 2, "tap"),
    (57.935, 3, "tap"),
    (58.617, 4, "tap"),
    (58.958, 4, "tap"),
    (59.981, 2, "tap"),
    (60.663, 1, "tap"),
    (61.345, 1, "tap"),
    (62.367, 3, "tap"),
    (62.708, 2, "tap"),
    (63.390, 3, "tap"),
    (64.072, 4, "tap"),
    (64.413, 3, "tap"),
    (65.435, 2, "tap"),
    (66.458, 2, "tap"),
    (66.799, 2, "tap"),
    (67.822, 1, "tap"),
    (68.163, 1, "tap"),
    (68.845, 2, "tap"),
    (69.526, 3, "tap"),
    (69.867, 4, "tap"),
    (70.890, 3, "tap"),
    (71.572, 2, "tap"),
    (72.254, 1, "tap"),
    (73.276, 1, "tap"),
    (73.617, 1, "tap"),
    (74.299, 2, "tap"),
    (74.981, 1, "tap"),
    (75.322, 2, "tap"),
    (76.345, 3, "tap"),
    (77.367, 3, "tap"),
    (78.049, 1, "tap"),
    (79.072, 2, "tap"),
    (79.754, 3, "flick"),
    (80.435, 4, "tap"),
    (81.458, 3, "tap"),
    (81.799, 2, "tap"),
    (82.822, 4, "tap"),
    (83.163, 4, "tap"),
    (84.185, 3, "tap"),
    (84.526, 2, "tap"),
    (85.208, 1, "flick"),
    (85.890, 3, "tap"),
    (86.913, 1, "tap"),
    (87.254, 1, "tap"),
    (88.276, 2, "tap"),
    (88.617, 2, "tap"),
    (89.299, 4, "tap"),
    (90.322, 3, "tap"),
    (90.663, 3, "tap"),
    (91.345, 1, "tap"),
    (92.026, 3, "tap"),
    (93.049, 3, "tap"),
    (93.390, 2, "tap"),
    (94.072, 1, "tap"),
    (95.095, 1, "tap"),
    (95.435, 1, "tap"),
    (96.117, 2, "tap"),
    (96.799, 3, "tap"),
    (97.822, 3, "tap"),
    (98.163, 3, "tap")
]


game.assign_beat_map(beat_map)

game.audio.volume(10)

time.sleep(2)

# game.start_game(track=1)

print("start")

# --- main loop ---
start_time = time.monotonic()
while True:
    game.update()


